const translations = {
    en: {
        "nav.home": "Home",
        "nav.categories": "Categories",
        "nav.about": "About",
        "nav.login": "Login",
        "hero.title": "All the tools you need, in one place.",
        "hero.subtitle": "A categorized collection of developer utilities, converters, and productivity tools.",
        "search.placeholder": "Search for a tool (e.g., JSON Formatter)...",
        "search.btn": "Search",
        "featured.title": "Featured Tools",
        "featured.viewAll": "View all",
        "tool.launch": "Launch Tool",
        "cat.dev": "Developer Tools",
        "cat.media": "Content & Media",
        "tool.json.title": "JSON Formatter",
        "tool.json.desc": "Beautify and validate JSON data instantly.",
        "tool.base64.title": "Base64 Encoder",
        "tool.base64.desc": "Encode and decode data strings easily. Essential for developers.",
        "tool.timestamp.title": "Unix Timestamp",
        "tool.timestamp.desc": "Convert between dates and Unix timestamps.",
        "tool.imgcomp.title": "Image Resizer",
        "tool.imgcomp.desc": "Resize images instantly without quality loss. Supports PNG, JPG, and WebP.",
        "tool.md.title": "Markdown Editor",
        "tool.md.desc": "WYSIWYG Markdown editor with real-time preview.",
        "tool.pdf.title": "Bank Statement Converter",
        "tool.pdf.desc": "Convert PDF bank statements to Excel securely in your browser. No data upload.",
        "tool.more.title": "More tools coming soon...",
        "tool.more.desc": "Stay tuned.",
        "footer.rights": "Â© 2023 allinone.page. All rights reserved.",
        "footer.privacy": "Privacy Policy",
        "footer.terms": "Terms of Service",
        "footer.contact": "Contact",
        "tool.popular": "POPULAR",
        "about.hero.title": "Simplifying Your Workflow",
        "about.hero.desc": "We provide a suite of powerful, free-to-use tools designed to make your daily digital tasks easier, faster, and more secure.",
        "about.values.title": "Our Core Values",
        "about.values.subtitle": "Built with the user in mind, we focus on what matters most: speed, privacy, and accessibility.",
        "about.val.free.title": "Free to Use",
        "about.val.free.desc": "Access all tools without hidden fees, credit cards, or premium subscriptions.",
        "about.val.privacy.title": "Privacy Focused",
        "about.val.privacy.desc": "Your data is processed securely. Files are automatically deleted after processing.",
        "about.val.fast.title": "Fast Processing",
        "about.val.fast.desc": "Optimized algorithms ensure your tasks are completed in seconds.",
        "about.team.title": "Meet the Team",
        "about.contact.title": "Get in Touch",
        "about.contact.desc": "Have a question or spotted a bug? Send us a message.",
        "about.form.name": "Name",
        "about.form.email": "Email",
        "about.form.subject": "Subject",
        "about.form.message": "Message",
        "about.form.send": "Send Message",

        "about.form.send": "Send Message",

        // PDF Converter
        "pdf.drag.title": "Drop PDF Statement Here",
        "pdf.drag.subtitle": "or click to select file",
        "pdf.status.processing": "Processing PDF...",
        "pdf.status.ready": "Ready to Download",
        "pdf.status.error": "Error processing file",
        "pdf.preview.title": "Preview Extracted Data",
        "pdf.action.download_excel": "Download Excel (.xlsx)",
        "pdf.action.download_csv": "Download CSV",
        "pdf.note.privacy": "ðŸ”’ Processed locally. Your data never leaves this browser.",
        "pdf.password.title": "Password Required",
        "pdf.password.desc": "This PDF is encrypted. Please enter the password to proceed.",
        "pdf.password.placeholder": "Enter password",
        "pdf.password.incorrect": "Incorrect password. Please try again.",
        "common.cancel": "Cancel",
        "common.submit": "Submit",

        // JSON Formatter
        "json.input.title": "Input JSON",
        "json.input.placeholder": "Paste your JSON here...",
        "json.action.format": "Format",
        "json.action.minify": "Minify",
        "json.action.clear": "Clear",
        "json.output.title": "Output (Pretty Print)",
        "json.action.copy": "Copy Output",

        // Image Compressor
        "img.drag.title": "Drag & Drop Image Here",
        "img.drag.subtitle": "or click to upload",
        "img.settings.title": "Compression Settings",
        "img.quality": "Quality",
        "img.width": "Max Width (px)",
        "img.height": "Max Height (px)",
        "img.format": "Format",
        "img.original": "Original",
        "img.compressed": "Compressed",
        "img.action.download": "Download",
        "img.action.compress": "Compress Image",

        // Base64
        "base64.input.label": "Input Text / Base64",
        "base64.input.placeholder": "Enter text to encode or Base64 string to decode...",
        "base64.action.encode": "Encode to Base64",
        "base64.action.decode": "Decode from Base64",
        "base64.output.label": "Result",
        "base64.output.placeholder": "Result will appear here...",

        // Markdown Editor
        "md.input.title": "Markdown Input",
        "md.input.placeholder": "Type your markdown here...",
        "md.preview.title": "Live Preview",
        "md.action.copy_html": "Copy HTML",
        "md.action.download": "Download .md",
        "md.word_count": "words",

        // Timestamp
        "ts.current.title": "Current Unix Timestamp",
        "ts.pause": "Pause Update",
        "ts.resume": "Resume Update",
        "ts.to_date.title": "Timestamp to Date",
        "ts.input_ts.label": "Unix Timestamp",
        "ts.unit.s": "Seconds",
        "ts.unit.ms": "Milliseconds",
        "ts.action.convert": "Convert",
        "ts.output.local": "Local Time",
        "ts.output.utc": "UTC Time",
        "ts.to_ts.title": "Date to Timestamp",
        "ts.input_date.label": "Select Date & Time",
        "ts.output.ts": "Timestamp (Seconds)"
    },
    zh: {
        "nav.home": "é¦–é¡µ",
        "nav.categories": "åˆ†ç±»",
        "nav.about": "å…³äºŽæˆ‘ä»¬",
        "nav.login": "ç™»å½•",
        "hero.title": "æ‚¨éœ€è¦çš„æ‰€æœ‰å·¥å…·ï¼Œå°½åœ¨äºŽæ­¤ã€‚",
        "hero.subtitle": "å¼€å‘è€…å®žç”¨ç¨‹åºã€è½¬æ¢å™¨å’Œç”Ÿäº§åŠ›å·¥å…·çš„åˆ†ç±»é›†åˆã€‚",
        "search.placeholder": "æœç´¢å·¥å…· (ä¾‹å¦‚: JSON æ ¼å¼åŒ–)...",
        "search.btn": "æœç´¢",
        "featured.title": "ç²¾é€‰å·¥å…·",
        "featured.viewAll": "æŸ¥çœ‹å…¨éƒ¨",
        "tool.launch": "æ‰“å¼€å·¥å…·",
        "cat.dev": "å¼€å‘è€…å·¥å…·",
        "cat.media": "å†…å®¹ä¸Žåª’ä½“",
        "tool.json.title": "JSON æ ¼å¼åŒ–",
        "tool.json.desc": "å³æ—¶ç¾ŽåŒ–å’ŒéªŒè¯ JSON æ•°æ®ã€‚",
        "tool.base64.title": "Base64 ç¼–ç ",
        "tool.base64.desc": "è½»æ¾ç¼–ç å’Œè§£ç æ•°æ®å­—ç¬¦ä¸²ã€‚å¼€å‘è€…å¿…å¤‡ã€‚",
        "tool.timestamp.title": "Unix æ—¶é—´æˆ³",
        "tool.timestamp.desc": "åœ¨æ—¥æœŸå’Œ Unix æ—¶é—´æˆ³ä¹‹é—´è½¬æ¢ã€‚",
        "tool.imgcomp.title": "å›¾ç‰‡åŽ‹ç¼©",
        "tool.imgcomp.desc": "å³æ—¶è°ƒæ•´å›¾ç‰‡å¤§å°ï¼Œæ— æŸç”»è´¨ã€‚æ”¯æŒ PNG, JPG, WebPã€‚",
        "tool.md.title": "Markdown ç¼–è¾‘å™¨",
        "tool.md.desc": "æ‰€è§å³æ‰€å¾—çš„ Markdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒå®žæ—¶é¢„è§ˆã€‚",
        "tool.pdf.title": "é“¶è¡Œå¯¹è´¦å•è½¬æ¢",
        "tool.pdf.desc": "å®‰å…¨åœ°å°† PDF é“¶è¡Œå¯¹è´¦å•è½¬ä¸º Excelã€‚æ— éœ€ä¸Šä¼ æ•°æ®ï¼Œæµè§ˆå™¨æœ¬åœ°å¤„ç†ã€‚",
        "tool.more.title": "æ›´å¤šå·¥å…·å³å°†æŽ¨å‡º...",
        "tool.more.desc": "æ•¬è¯·æœŸå¾…ã€‚",
        "footer.rights": "Â© 2023 allinone.page. All rights reserved.",
        "footer.privacy": "éšç§æ”¿ç­–",
        "footer.terms": "æœåŠ¡æ¡æ¬¾",
        "footer.contact": "è”ç³»æˆ‘ä»¬",
        "tool.popular": "çƒ­é—¨",
        "about.hero.title": "ç®€åŒ–æ‚¨çš„å·¥ä½œæµç¨‹",
        "about.hero.desc": "æˆ‘ä»¬æä¾›ä¸€å¥—å¼ºå¤§ä¸”å…è´¹çš„å·¥å…·ï¼Œæ—¨åœ¨è®©æ‚¨çš„æ—¥å¸¸æ•°å­—ä»»åŠ¡æ›´è½»æ¾ã€æ›´å¿«é€Ÿã€æ›´å®‰å…¨ã€‚",
        "about.values.title": "æ ¸å¿ƒä»·å€¼",
        "about.values.subtitle": "ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼Œæˆ‘ä»¬å…³æ³¨æœ€é‡è¦çš„ï¼šé€Ÿåº¦ã€éšç§å’Œå¯è®¿é—®æ€§ã€‚",
        "about.val.free.title": "å®Œå…¨å…è´¹",
        "about.val.free.desc": "ä½¿ç”¨æ‰€æœ‰å·¥å…·æ— éœ€éšè—è´¹ç”¨ï¼Œæ— éœ€ä¿¡ç”¨å¡æˆ–é«˜çº§è®¢é˜…ã€‚",
        "about.val.privacy.title": "éšç§è‡³ä¸Š",
        "about.val.privacy.desc": "æ‚¨çš„æ•°æ®å®‰å…¨å¤„ç†ã€‚æ–‡ä»¶å¤„ç†åŽè‡ªåŠ¨åˆ é™¤ã€‚",
        "about.val.fast.title": "å¿«é€Ÿå¤„ç†",
        "about.val.fast.desc": "ä¼˜åŒ–ç®—æ³•ç¡®æ‚¨çš„ä»»åŠ¡åœ¨å‡ ç§’é’Ÿå†…å®Œæˆã€‚",
        "about.team.title": "é‡è§å›¢é˜Ÿ",
        "about.contact.title": "è”ç³»æˆ‘ä»¬",
        "about.contact.desc": "æœ‰é—®é¢˜æˆ–å‘çŽ°Bugï¼Ÿç»™æˆ‘ä»¬ç•™è¨€ã€‚",
        "about.form.name": "å§“å",
        "about.form.email": "ç”µå­é‚®ç®±",
        "about.form.subject": "ä¸»é¢˜",
        "about.form.message": "ç•™è¨€å†…å®¹",
        "about.form.send": "å‘é€ç•™è¨€",

        "about.form.send": "å‘é€ç•™è¨€",

        // PDF Converter
        "pdf.drag.title": "å°† PDF å¯¹è´¦å•æ‹–æ”¾åˆ°æ­¤å¤„",
        "pdf.drag.subtitle": "æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶",
        "pdf.status.processing": "æ­£åœ¨å¤„ç† PDF...",
        "pdf.status.ready": "å‡†å¤‡ä¸‹è½½",
        "pdf.status.error": "å¤„ç†æ–‡ä»¶å‡ºé”™",
        "pdf.preview.title": "é¢„è§ˆæå–çš„æ•°æ®",
        "pdf.action.download_excel": "ä¸‹è½½ Excel (.xlsx)",
        "pdf.action.download_csv": "ä¸‹è½½ CSV",
        "pdf.note.privacy": "ðŸ”’ æœ¬åœ°å¤„ç†ã€‚æ‚¨çš„æ•°æ®ä»Žæœªç¦»å¼€æ­¤æµè§ˆå™¨ã€‚",
        "pdf.password.title": "éœ€è¦å¯†ç ",
        "pdf.password.desc": "æ­¤ PDF å·²åŠ å¯†ã€‚è¯·è¾“å…¥å¯†ç ä»¥ç»§ç»­ã€‚",
        "pdf.password.placeholder": "è¯·è¾“å…¥å¯†ç ",
        "pdf.password.incorrect": "å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚",
        "common.cancel": "å–æ¶ˆ",
        "common.submit": "æäº¤",

        // JSON Formatter
        "json.input.title": "è¾“å…¥ JSON",
        "json.input.placeholder": "åœ¨è¿™é‡Œç²˜è´´æ‚¨çš„ JSON...",
        "json.action.format": "æ ¼å¼åŒ–",
        "json.action.minify": "åŽ‹ç¼©",
        "json.action.clear": "æ¸…ç©º",
        "json.output.title": "è¾“å‡º (ç¾ŽåŒ–)",
        "json.action.copy": "å¤åˆ¶ç»“æžœ",

        // Image Compressor
        "img.drag.title": "æ‹–æ”¾å›¾ç‰‡åˆ°è¿™é‡Œ",
        "img.drag.subtitle": "æˆ–ç‚¹å‡»ä¸Šä¼ ",
        "img.settings.title": "åŽ‹ç¼©è®¾ç½®",
        "img.quality": "è´¨é‡",
        "img.width": "æœ€å¤§å®½åº¦ (px)",
        "img.height": "æœ€å¤§é«˜åº¦ (px)",
        "img.format": "æ ¼å¼",
        "img.original": "åŽŸå§‹",
        "img.compressed": "åŽ‹ç¼©åŽ",
        "img.action.download": "ä¸‹è½½",
        "img.action.compress": "åŽ‹ç¼©å›¾ç‰‡",

        // Base64
        "base64.input.label": "è¾“å…¥æ–‡æœ¬ / Base64",
        "base64.input.placeholder": "è¾“å…¥è¦ç¼–ç çš„æ–‡æœ¬æˆ–è§£ç çš„ Base64 å­—ç¬¦ä¸²...",
        "base64.action.encode": "ç¼–ç ä¸º Base64",
        "base64.action.decode": "Base64 è§£ç ",
        "base64.output.label": "ç»“æžœ",
        "base64.output.placeholder": "ç»“æžœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...",

        // Markdown Editor
        "md.input.title": "Markdown è¾“å…¥",
        "md.input.placeholder": "åœ¨è¿™é‡Œè¾“å…¥ Markdown...",
        "md.preview.title": "å®žæ—¶é¢„è§ˆ",
        "md.action.copy_html": "å¤åˆ¶ HTML",
        "md.action.download": "ä¸‹è½½ .md",
        "md.word_count": "å­—",

        // Timestamp
        "ts.current.title": "å½“å‰ Unix æ—¶é—´æˆ³",
        "ts.pause": "æš‚åœæ›´æ–°",
        "ts.resume": "ç»§ç»­æ›´æ–°",
        "ts.to_date.title": "æ—¶é—´æˆ³è½¬æ—¥æœŸ",
        "ts.input_ts.label": "Unix æ—¶é—´æˆ³",
        "ts.unit.s": "ç§’",
        "ts.unit.ms": "æ¯«ç§’",
        "ts.action.convert": "è½¬æ¢",
        "ts.output.local": "æœ¬åœ°æ—¶é—´",
        "ts.output.utc": "UTC æ—¶é—´",
        "ts.to_ts.title": "æ—¥æœŸè½¬æ—¶é—´æˆ³",
        "ts.input_date.label": "é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´",
        "ts.output.ts": "æ—¶é—´æˆ³ (ç§’)"
    }
};

class I18nManager {
    constructor() {
        this.currentLang = this.getInitialLanguage();
        this.init();
    }

    getInitialLanguage() {
        const savedLang = localStorage.getItem('app_lang');
        if (savedLang) return savedLang;

        const browserLang = navigator.language.toLowerCase();
        return browserLang.startsWith('zh') ? 'zh' : 'en';
    }

    init() {
        this.updateDOM();
        this.updateDirection();
    }

    setLanguage(lang) {
        if (!translations[lang]) return;
        this.currentLang = lang;
        localStorage.setItem('app_lang', lang);
        this.updateDOM();
    }

    t(key) {
        return translations[this.currentLang][key] || key;
    }

    updateDOM() {
        document.documentElement.lang = this.currentLang;
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            const translation = this.t(key);

            if (el.tagName === 'INPUT' && el.getAttribute('placeholder')) {
                el.placeholder = translation;
            } else if (el.tagName === 'TEXTAREA' && el.getAttribute('placeholder')) {
                el.placeholder = translation;
            } else {
                el.textContent = translation;
            }
        });

        // Global Nav Language Switcher State
        const btnEn = document.getElementById('lang-en');
        const btnZh = document.getElementById('lang-zh');
        if (btnEn && btnZh) {
            if (this.currentLang === 'en') {
                btnEn.classList.add('font-bold', 'text-blue-600');
                btnZh.classList.remove('font-bold', 'text-blue-600');
            } else {
                btnZh.classList.add('font-bold', 'text-blue-600');
                btnEn.classList.remove('font-bold', 'text-blue-600');
            }
        }
    }

    updateDirection() {
        // Future proofing for RTL
    }
}

window.i18n = new I18nManager();

window.changeLanguage = (lang) => {
    window.i18n.setLanguage(lang);
};
