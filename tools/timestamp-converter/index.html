<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unix 时间戳转换 - 在线工具箱</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

    <nav class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-5xl mx-auto px-4 py-4">
            <a href="/" class="text-xl font-bold text-indigo-600 flex items-center gap-2">
                <i class="fa-solid fa-toolbox"></i> 我的工具站
                <span class="text-gray-400 text-sm font-normal">/ 时间戳转换</span>
            </a>
        </div>
    </nav>

    <main class="flex-grow max-w-3xl mx-auto w-full px-4 py-12 space-y-8">
        
        <!-- 当前时间显示 -->
        <div class="bg-indigo-600 text-white rounded-lg shadow-lg p-6 text-center">
            <p class="text-indigo-200 text-sm uppercase tracking-widest font-semibold mb-2">Current Unix Timestamp</p>
            <div class="text-5xl font-mono font-bold tracking-tight" id="current-timestamp">Loading...</div>
            <div class="mt-2 text-indigo-200" id="current-readable"></div>
            <button id="btn-pause" class="mt-4 px-4 py-1 bg-indigo-700 rounded-full text-xs hover:bg-indigo-800 transition">暂停更新</button>
        </div>

        <!-- 转换器 A: 时间戳 -> 日期 -->
        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
            <h2 class="text-lg font-semibold mb-4 border-b pb-2 flex items-center gap-2">
                <i class="fa-regular fa-clock"></i> 时间戳转日期
            </h2>
            <div class="flex flex-col md:flex-row gap-4 items-end">
                <div class="flex-grow w-full">
                    <label class="block text-sm text-gray-600 mb-1">Unix 时间戳 (秒/毫秒)</label>
                    <div class="flex">
                        <input type="number" id="input-ts" class="flex-grow border border-gray-300 rounded-l-md p-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="例如: 1678888888">
                        <select id="unit-select" class="border-t border-b border-r border-gray-300 bg-gray-50 text-sm px-2 rounded-r-md">
                            <option value="s">秒 (s)</option>
                            <option value="ms">毫秒 (ms)</option>
                        </select>
                    </div>
                </div>
                <button id="btn-convert-to-date" class="w-full md:w-auto bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700">转换 &rarr;</button>
            </div>
            
            <div class="mt-4 p-4 bg-gray-50 rounded-md border border-gray-100 hidden" id="result-date-box">
                <p class="text-sm text-gray-500">本地时间:</p>
                <p class="text-xl font-mono text-gray-900 break-all" id="output-date"></p>
                <p class="text-sm text-gray-500 mt-2">UTC 时间:</p>
                <p class="text-base font-mono text-gray-700 break-all" id="output-utc"></p>
            </div>
        </div>

        <!-- 转换器 B: 日期 -> 时间戳 -->
        <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200">
            <h2 class="text-lg font-semibold mb-4 border-b pb-2 flex items-center gap-2">
                <i class="fa-regular fa-calendar"></i> 日期转时间戳
            </h2>
            <div class="flex flex-col md:flex-row gap-4 items-end">
                <div class="flex-grow w-full">
                    <label class="block text-sm text-gray-600 mb-1">选择时间</label>
                    <input type="datetime-local" step="1" id="input-date" class="w-full border border-gray-300 rounded-md p-2 focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <button id="btn-convert-to-ts" class="w-full md:w-auto bg-emerald-600 text-white px-6 py-2 rounded-md hover:bg-emerald-700">转换 &rarr;</button>
            </div>

            <div class="mt-4 p-4 bg-gray-50 rounded-md border border-gray-100 hidden" id="result-ts-box">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm text-gray-500">时间戳 (秒):</p>
                        <p class="text-2xl font-mono text-emerald-700 font-bold" id="output-ts"></p>
                    </div>
                    <button class="text-sm text-indigo-600 hover:underline" onclick="copyText('output-ts')">复制</button>
                </div>
            </div>
        </div>

    </main>

    <script>
        // 实用函数：复制到剪贴板
        function copyText(elementId) {
            const el = document.getElementById(elementId);
            const range = document.createRange();
            range.selectNode(el);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand('copy');
            window.getSelection().removeAllRanges();
            alert('已复制: ' + el.innerText);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // 1. 实时时钟逻辑
            const tsDisplay = document.getElementById('current-timestamp');
            const readableDisplay = document.getElementById('current-readable');
            const btnPause = document.getElementById('btn-pause');
            let isPaused = false;

            function updateClock() {
                if(isPaused) return;
                const now = new Date();
                tsDisplay.innerText = Math.floor(now.getTime() / 1000);
                readableDisplay.innerText = now.toLocaleString();
            }
            
            setInterval(updateClock, 1000);
            updateClock();

            btnPause.addEventListener('click', () => {
                isPaused = !isPaused;
                btnPause.innerText = isPaused ? "继续更新" : "暂停更新";
                btnPause.classList.toggle('bg-red-600', isPaused);
                btnPause.classList.toggle('bg-indigo-700', !isPaused);
            });

            // 2. 时间戳 -> 日期
            const inputTs = document.getElementById('input-ts');
            const unitSelect = document.getElementById('unit-select');
            const outputDate = document.getElementById('output-date');
            const outputUtc = document.getElementById('output-utc');
            const resultDateBox = document.getElementById('result-date-box');

            document.getElementById('btn-convert-to-date').addEventListener('click', () => {
                let val = parseInt(inputTs.value);
                if (isNaN(val)) return;

                // 如果是秒，转为毫秒
                if (unitSelect.value === 's') val *= 1000;

                const date = new Date(val);
                outputDate.innerText = date.toLocaleString();
                outputUtc.innerText = date.toUTCString();
                resultDateBox.classList.remove('hidden');
            });

            // 3. 日期 -> 时间戳
            const inputDate = document.getElementById('input-date');
            const outputTs = document.getElementById('output-ts');
            const resultTsBox = document.getElementById('result-ts-box');

            // 默认填充当前时间到输入框
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            inputDate.value = now.toISOString().slice(0, 19);

            document.getElementById('btn-convert-to-ts').addEventListener('click', () => {
                const val = inputDate.value;
                if (!val) return;
                const date = new Date(val);
                const ts = Math.floor(date.getTime() / 1000);
                outputTs.innerText = ts;
                resultTsBox.classList.remove('hidden');
            });
        });
    </script>
</body>
</html>